<!-- templates/contractor_register.html - Contractor Registration Form -->
<!DOCTYPE html>
<html>
<head>
    <title>Contractor Registration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
</head>
<body>
<div class="container mt-4">
    <h3 class="mb-4">
        <i class="bi bi-person-plus text-primary"></i> Contractor Registration
    </h3>

    <div class="alert alert-info">
        <h6><i class="bi bi-info-circle"></i> Registration Requirements</h6>
        All contractors must complete this registration process before being granted site access. 
        Safety training and orientation will be required upon approval.
    </div>

    <form method="post" class="card shadow" enctype="multipart/form-data">
        <div class="card-header bg-primary text-white">
            <h6 class="mb-0">Company Information</h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Company Name <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" name="company_name" required 
                               placeholder="Your company name">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Contact Person <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" name="contact_person" required
                               placeholder="Primary contact name">
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Phone Number <span class="text-danger">*</span></label>
                        <input type="tel" class="form-control" name="phone" required
                               placeholder="(555) 123-4567">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Email Address <span class="text-danger">*</span></label>
                        <input type="email" class="form-control" name="email" required
                               placeholder="contact@company.com">
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Work Description <span class="text-danger">*</span></label>
                <textarea class="form-control" name="work_description" rows="3" required
                          placeholder="Describe the type of work to be performed on site"></textarea>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Insurance Expiry Date <span class="text-danger">*</span></label>
                        <input type="date" class="form-control" name="insurance_expiry" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Insurance Certificate</label>
                        <input type="file" class="form-control" name="insurance_file" accept=".pdf,.jpg,.png">
                        <div class="form-text">Upload insurance certificate (PDF or image)</div>
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Work Locations</label>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="work_locations" value="warehouse" id="warehouse">
                            <label class="form-check-label" for="warehouse">Warehouse</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="work_locations" value="office" id="office">
                            <label class="form-check-label" for="office">Office Areas</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="work_locations" value="production" id="production">
                            <label class="form-check-label" for="production">Production Area</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Potential Hazard Exposure</label>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="hazard_exposure" value="chemicals" id="chemicals">
                            <label class="form-check-label" for="chemicals">Chemicals</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="hazard_exposure" value="heights" id="heights">
                            <label class="form-check-label" for="heights">Working at Heights</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="hazard_exposure" value="machinery" id="machinery">
                            <label class="form-check-label" for="machinery">Heavy Machinery</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card-footer">
            <div class="d-flex justify-content-between">
                <a href="/contractors" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Cancel
                </a>
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-send"></i> Submit Registration
                </button>
            </div>
        </div>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

<!-- templates/visitor_checkin.html - Visitor Check-in Form -->
<!DOCTYPE html>
<html>
<head>
    <title>Visitor Check-in</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
</head>
<body>
<div class="container mt-4">
    <h3 class="mb-4">
        <i class="bi bi-person-check text-success"></i> Visitor Check-in
    </h3>

    <div class="alert alert-warning">
        <h6><i class="bi bi-exclamation-triangle"></i> Safety First</h6>
        All visitors must complete this check-in process and receive a safety briefing before entering work areas.
    </div>

    <form method="post" class="card shadow">
        <div class="card-header bg-success text-white">
            <h6 class="mb-0">Visitor Information</h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Visitor Name <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" name="name" required 
                               placeholder="Full name">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Company/Organization</label>
                        <input type="text" class="form-control" name="company"
                               placeholder="Visitor's company">
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Purpose of Visit <span class="text-danger">*</span></label>
                        <select class="form-select" name="purpose" required>
                            <option value="">Select purpose</option>
                            <option value="meeting">Business Meeting</option>
                            <option value="delivery">Delivery/Pickup</option>
                            <option value="maintenance">Maintenance/Service</option>
                            <option value="inspection">Inspection/Audit</option>
                            <option value="training">Training/Education</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Host/Contact Person <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" name="host" required
                               placeholder="Employee host name">
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Expected Duration</label>
                        <select class="form-select" name="duration">
                            <option value="less_than_1_hour">Less than 1 hour</option>
                            <option value="1_to_2_hours">1-2 hours</option>
                            <option value="2_to_4_hours">2-4 hours</option>
                            <option value="half_day">Half day</option>
                            <option value="full_day">Full day</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Emergency Contact</label>
                        <input type="text" class="form-control" name="emergency_contact"
                               placeholder="Emergency contact name and phone">
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Areas Authorized to Visit</label>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="areas" value="reception" id="reception" checked>
                            <label class="form-check-label" for="reception">Reception/Lobby</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="areas" value="conference" id="conference">
                            <label class="form-check-label" for="conference">Conference Rooms</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="areas" value="office" id="office_area">
                            <label class="form-check-label" for="office_area">Office Areas</label>
                        </div>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="areas" value="warehouse" id="warehouse_area">
                            <label class="form-check-label" for="warehouse_area">Warehouse</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="areas" value="production" id="production_area">
                            <label class="form-check-label" for="production_area">Production Area</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="areas" value="lab" id="lab">
                            <label class="form-check-label" for="lab">Laboratory</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="safety_briefing" id="safety_briefing" required>
                    <label class="form-check-label" for="safety_briefing">
                        <span class="text-danger">*</span> I have received and understood the safety briefing
                    </label>
                </div>
            </div>

            <div class="mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="has_ppe" id="has_ppe">
                    <label class="form-check-label" for="has_ppe">
                        I have been provided with required PPE (if applicable)
                    </label>
                </div>
            </div>
        </div>

        <div class="card-footer">
            <div class="d-flex justify-content-between">
                <a href="/contractors" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Back
                </a>
                <button type="submit" class="btn btn-success">
                    <i class="bi bi-check-circle"></i> Complete Check-in
                </button>
            </div>
        </div>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Show warning for high-risk areas
document.addEventListener('DOMContentLoaded', function() {
    const highRiskAreas = ['warehouse', 'production', 'lab'];
    const checkboxes = document.querySelectorAll('input[name="areas"]');
    
    checkboxes.forEach(checkbox => {
        if (highRiskAreas.includes(checkbox.value)) {
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    alert(`Warning: ${this.nextElementSibling.textContent} requires additional safety precautions. Your host will provide specific safety instructions.`);
                }
            });
        }
    });
});
</script>
</body>
</html> class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/capa">CAPAs</a></li>
                    <li class="breadcrumb-item active">{{ capa.id[:8] if capa else 'Loading...' }}</li>
                </ol>
            </nav>
        </div>
        <div>
            {% if capa %}
            <span class="badge bg-{{ 'success' if capa.status == 'completed' else ('warning' if capa.status == 'in_progress' else 'secondary') }} fs-6">
                {{ capa.status|replace('_', ' ')|title }}
            </span>
            {% endif %}
        </div>
    </div>

    {% if capa %}
    <div class="row">
        <div class="col-md-8">
            <div class="card shadow mb-4">
                <div class="card-header bg-primary text-white">
                    <h6 class="mb-0"><i class="bi bi-info-circle"></i> CAPA Information</h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>ID:</strong> <code>{{ capa.id }}</code></p>
                            <p><strong>Title:</strong> {{ capa.title }}</p>
                            <p><strong>Type:</strong> 
                                <span class="badge bg-{{ 'success' if capa.type == 'preventive' else 'warning' }}">
                                    {{ capa.type|title }}
                                </span>
                            </p>
                            <p><strong>Priority:</strong> 
                                <span class="badge bg-{{ 'danger' if capa.priority == 'critical' else ('warning' if capa.priority == 'high' else ('info' if capa.priority == 'medium' else 'secondary')) }}">
                                    {{ capa.priority|title }}
                                </span>
                            </p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Assignee:</strong> {{ capa.assignee or 'Unassigned' }}</p>
                            <p><strong>Due Date:</strong> {{ capa.due_date }}</p>
                            <p><strong>Created:</strong> {{ capa.created_date }}</p>
                            <p><strong>Created By:</strong> {{ capa.created_by }}</p>
                        </div>
                    </div>
                    
                    {% if capa.description %}
                    <hr>
                    <h6>Description</h6>
                    <p>{{ capa.description }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card shadow mb-4">
                <div class="card-header">
                    <h6 class="mb-0"><i class="bi bi-lightning"></i> Quick Actions</h6>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        {% if capa.status != 'completed' %}
                        <button class="btn btn-success" onclick="updateStatus('completed')">
                            <i class="bi bi-check-circle"></i> Mark Complete
                        </button>
                        {% endif %}
                        
                        <a href="/capa" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left"></i> Back to List
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="alert alert-warning">
        <h5>CAPA Not Found</h5>
        <p>The requested CAPA could not be found. It may have been deleted or the ID is incorrect.</p>
        <a href="/capa" class="btn btn-primary">Back to CAPA List</a>
    </div>
    {% endif %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
function updateStatus(status) {
    if (confirm(`Mark this CAPA as ${status}?`)) {
        // In a real implementation, this would make an API call
        window.location.href = `/capa/{{ capa.id if capa else '' }}/update?status=${status}`;
    }
}
</script>
</body>
</html>
